# Owning The Forest - Enumeration

The first enumeration step is to map out any forest trusts.

This can be done easily with .NET through the Forest.GetAllTrustRelationships method.

```PowerShell
PS C:\> ([System.DirectoryServices.ActiveDirectory.Forest]::GetCurrentForest()).GetAllTrustRelationships()
```

We could also perform the enumeration with PowerView through the Get-ForestTrust method.

If selective authentication is not enabled, we can eumerate trusts to child domains.

```PowerShell
PS C:\> Get-DomainTrust -Domain sinhack.com
```

In a large Active Directory infrastructure, we can use the PowerView method to automate the process.

```PowerShell
PS C:\tools> Get-DomainTrustMapping
```

Now we can enumerate users of a given domain 

```PowerShell
PS C:\Tools> Get-DomainUser -Domain sinhack.com
```

One simple approach is to search for users with the same username in both forests as they might belong to the same employee.

If such an account exists, there is a chance that the accounts share a password, which could grant us access.

We could also attack foreign user accounts.

We can enumerate groups in a trusted forest or domain that contains non-native members with PowerView

```PowerShell
PS C:\tools> Get-DomainForeignGroupMember -Domain sinhack.com
```